<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta name="description" content="D7000">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
<title>NETGEAR Router D7000</title>
<link rel="stylesheet" href="style/form.css">
<style type="text/javascript">
	classes.num.all.fontFamily="Courier";
	classes.num.all.fontSize="10pt";
</style>
<script language="javascript" type="text/javascript" src="string.js"></script>
<script language="javascript" type="text/javascript" src="funcs.js"></script>
<script language="javascript" type="text/javascript" src="utility.js"></script>
<script language="javascript" type="text/javascript" src="linux.js"></script>
<script language="javascript" type="text/javascript" src="anc.js"></script>
<script language="javascript" type="text/javascript">
<!--

function varInit() {
	AncdataToVisible(document.forms[0]);
	var cf=document.forms[0];
	var cfe=cf.elements;

	var formlen=cfe.length;
	for(var i=0;i<formlen;i++) if(cfe[i].value=="" && cfe[i].type=="checkbox") cfe[i].checked=false;
	if(cf.telnet_enable.value=="") cf.telnet_enable.checked=true;

		if(cf.h_anc_boot_disable.value=="1") {
		allToDisabled(cf);
		alert("Warning! Runlevel boot service disabled: page locked !\n");
		}
}

function runInhCmd(serv, servflag) {
	var cf=document.forms[0], msg, flgset, cmd;

	if(servflag.checked==true) flgset="disable";
	else flgset="enable";
	msg="Warning! "+serv+" service is about to be "+flgset+"d: proceed ?";
	if(!confirm(msg)) return false;

	cmd="/usr/sbin/rc_app/rc_"+serv+" "+flgset+" >/dev/null 2>&1";
	AncstdAction(cf,'anc_inhibit.htm','','inhibit',cmd);
	return true;
}

function runPSCmd(psflag) {
	var cf=document.forms[0], msg, flgset, cmd;

	if(psflag.checked==true) flgset="enable";
	else flgset="disable";
	msg="Warning! Print Server killing service is about to be "+flgset+"d :proceed ?";
	if(!confirm(msg)) return false;

	cmd="/usr/sbin/scripts/printserverkill.sh "+flgset+"kill >/dev/null 2>&1";
	AncstdAction(cf,'anc_inhibit.htm','','inhibit',cmd);
	return true;
}

function runUpgCmd() {
	var cf=document.forms[0], cmd, flg;

	if(cf.anc_upgr_disable.checked==true) flg="1";
	else flg="0";

	cmd="/usr/sbin/nvram set anc_upgr_disable="+flg+" >/dev/null 2>&1";
	AncstdAction(cf,'anc_inhibit.htm','','inhibit',cmd);
	return true;
}

function runTelCmd() {
	var cf=document.forms[0], cmd, flg;

	if(cf.telnet_enable.checked==true) flg="1";
	else flg="0";

	cmd="/usr/sbin/nvram set telnet_enable="+flg+" >/dev/null 2>&1; rc debug_mode start";
	AncstdAction(cf,'anc_inhibit.htm','','opkg',cmd);
	return true;
}

function showAll() {
	var inname=["Connection Check", "Periodic Firewall Check", "DNRD DNS Daemon", "Internal DNS Hijack", "Apple Time Machine", "Apple ITunes", "NTP Time", "POT Counter", "Kernel Messages Printing", "Schedule", "Scheduled Show Mem Log", "Logging", "Internal Cloud", "Led Control", "Print Server", "Upgrade Notifications", ""];
	var inval=["check_conn", "check_fw", "dnrd", "dnshj", "apple", "iserver", "ntp", "potcounter", "printk", "schedule", "show_mem_log", "syslogd", "xCloud", "led_ctrl", "printserver", "anc_upgr", "telnet"];
	var val=["@h_check_conn_disable#", "@h_check_fw_disable#", "@h_dnrd_disable#", "@h_dnshj_disable#", "@h_apple_disable#", "@h_iserver_disable#", "@h_ntp_disable#", "@h_potcounter_disable#", "@h_printk_disable#", "@h_schedule_disable#", "@h_show_mem_log_disable#", "@h_syslogd_disable#", "@h_xCloud_disable#", "@h_led_ctrl_disable#", "@h_printserver_disable#", "@h_anc_upgr_disable#", "@h_telnet_enable#"];

	var xmlhttp=readFileTags("opkgstatus"), str="", txt="", tel=0;
	if(xmlhttp.readyState==4 && xmlhttp.status==200) str=xmlhttp.responseText;
	if(str.indexOf("telnet")>-1) tel=1;

	for(var i=0;i<inval.length;i++) {
	if(i==16 && !tel) continue;
	txt+="<tr><td nowrap><input type='checkbox' name='"+inval[i];
	if(i!=16) txt+="_disable' ";
	else txt+="_enable' ";
	txt+="value='"+val[i]+"'><a href='javascript:gotoWiki(\"Service-Inhibitions#";
	if(i!=15) txt+=inval[i];
	else txt+="upgrade-notifications";
	if(i!=16) txt+="\");'><b>Inhibit "+inname[i];
	else txt+="\");'><b>Turn Telnet Daemon On";
	txt+="</b></a></td><td nowrap align='right'><input class='apply_bt' type='submit' value='Apply' onClick='return run";
	if(i<14) txt+="InhCmd(\""+inval[i]+"\", "+inval[i]+"_disable);'>";
	else if(i==14) txt+="PSCmd("+inval[i]+"_disable);'>";
	else if(i==15) txt+="UpgCmd();'>";
	else txt+="TelCmd();'>";
	txt+="</td></tr><tr><td colspan='2' background='liteblue.gif' height='12'></td></tr>";
	}
	document.write(txt);
}

//-->
</script></head>
<body bgcolor="#ffffff" leftmargin="0" marginwidth="0" topmargin="0" marginheight="0" onload="varInit();document.forms[0].elements[0].focus();">
<form name="inhibit" method="POST" action="anc.cgi" onSubmit="buttonToDisabled(document.forms[0])">
<div><a class="page_title" href="javascript:gotoWiki('Service-Inhibitions/');">Service Inhibitions</a></div>
<div class="fix_button"><table border="0" cellpadding="0" cellspacing="2" width="100%"><tr><td nowrap colspan="2" align="center">
<input class="cancel_bt" type="RESET" name="cancel" value="Cancel" onClick="setTimeout('varInit()',250)">
</td></tr></table></div>
<div id="main" class="main_top_button">
<table border="0" cellpadding="0" cellspacing="3" width="100%">
<script>showAll()</script>
</table>
<input type="hidden" name="job" value="">
<input type="hidden" name="todo" value="">
<input type="hidden" name="next_file" value="anc_inhibit.htm">
<input type="hidden" name="old_file" value="">
<input type="hidden" name="h_check_conn_disable" value="@h_check_conn_disable#">
<input type="hidden" name="h_check_fw_disable" value="@h_check_fw_disable#">
<input type="hidden" name="h_dnrd_disable" value="@h_dnrd_disable#">
<input type="hidden" name="h_dnshj_disable" value="@h_dnshj_disable#">
<input type="hidden" name="h_apple_disable" value="@h_apple_disable#">
<input type="hidden" name="h_iserver_disable" value="@h_iserver_disable#">
<input type="hidden" name="h_ntp_disable" value="@h_ntp_disable#">
<input type="hidden" name="h_potcounter_disable" value="@h_potcounter_disable#">
<input type="hidden" name="h_printk_disable" value="@h_printk_disable#">
<input type="hidden" name="h_schedule_disable" value="@h_schedule_disable#">
<input type="hidden" name="h_show_mem_log_disable" value="@h_show_mem_log_disable#">
<input type="hidden" name="h_syslogd_disable" value="@h_syslogd_disable#">
<input type="hidden" name="h_xCloud_disable" value="@h_xCloud_disable#">
<input type="hidden" name="h_led_ctrl_disable" value="@h_led_ctrl_disable#">
<input type="hidden" name="h_printserver_disable" value="@h_printserver_disable#">
<input type="hidden" name="h_anc_boot_disable" value="@h_anc_boot_disable#">
<input type="hidden" name="h_anc_upgr_disable" value="@h_anc_upgr_disable#">
<input type="hidden" name="h_telnet_enable" value="@h_telnet_enable#">
</div>
</form>
<script>printHelp();</script>
</body></html>
